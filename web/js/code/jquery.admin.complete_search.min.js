/* 
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
$().ready(function(){
    loadCompleteList();
});

$('#all').click(function(){
    loadCompleteList();
});

$('#building').click(function(){
    loadBuildingList();
});
$('#plot').click(function(){
    loadPlotList();
});

//==============================================================================




function loadCompleteList(){
    var output =  dhtmlxAjax.getSync("CompletePropertyAjaxServlet");
    var data =  output.xmlDoc.responseText;
    var jsonArray = JSON.parse(data);
    console.log("Data: " + data);
    console.log("jsonArray: " + jsonArray);
    console.log("jsonArray: " + JSON.stringify(jsonArray));
    console.log("Length: " + jsonArray.length);
    var completeHtml =  '<div class="col-lg-3 col-md-3 col-sm-6 wide plot" style="width:100%">'
    + '<h3>PROPERTIES DETAILS</h3><div class="divider"></div>'
    +'<table class="myProperties">'
    
    +'<tr class="myPropertiesHeader">'
    +' <td class="myPropertyImg">Image</td>'
    +' <td class="myPropertyAddress">Address</td>'
    +'  <td class="myPropertyType">Type</td>'
    +'  <td class="myPropertyStatus">Status</td>'
    +' <td class="myPropertyDate">Date Created</td>'
    +'  <td class="myPropertyActions">Actions</td>'
    +' </tr>';

    if(jsonArray.length > 0){
        for(var obj in jsonArray){
            //  if(jsonArray[obj].type == 'building'){
            completeHtml = completeHtml +' <tr>'
            if(jsonArray[obj].type == 'building') {
                completeHtml = completeHtml +' <td class="myPropertyImg"><a href="admin_view_property.jsp?prop_id='+jsonArray[obj].prop_id+'">'
            } else {
                completeHtml = completeHtml +' <td class="myPropertyImg"><a href="admin_view_plot.jsp?prop_id='+jsonArray[obj].prop_id+'">'
            }
          
            completeHtml = completeHtml +' <img class="smallThumb" src="REAL/photo_01_' + jsonArray[obj].prop_id+'.jpg"'
            + ' alt="" /></a></td>'
            if(jsonArray[obj].type == 'building') {
                completeHtml = completeHtml  +' <td class="myPropertyAddress"><a href="admin_view_property.jsp?prop_id='+jsonArray[obj].prop_id+'">'
            } else {
                completeHtml = completeHtml  +' <td class="myPropertyAddress"><a href="admin_view_plot.jsp?prop_id='+jsonArray[obj].prop_id+'">'
            }
          
            completeHtml = completeHtml+' <h4>'+jsonArray[obj].prop_title+'</h4></a></td>'
            +' <td class="myPropertyType">'+jsonArray[obj].prop_type+'</td>'
            +'  <td class="myPropertyStatus">'+jsonArray[obj].contract_type+'</td>'
            +' <td class="myPropertyDate">'+jsonArray[obj].post_date+'</td>'
            +' <td class="myPropertyActions"> <span> <a href="">'+jsonArray[obj].status+'</a></span> '
            if(jsonArray[obj].type == 'building') {
                completeHtml = completeHtml  +'<span><a href="admin_view_property.jsp?prop_id='+jsonArray[obj].prop_id+'">'
            } else {
                completeHtml = completeHtml  +'<span><a href="admin_view_plot.jsp?prop_id='+jsonArray[obj].prop_id+'">'
            }
            
            completeHtml = completeHtml  +' <img class="icon" src="images/icon-view.png" alt="" />VIEW</a></span></td>'
            +'</tr>';
        //            } else if(jsonArray[obj].type == 'plot'){
        //                plotHtml = plotHtml +' <tr>'
        //                +' <td class="myPropertyImg"><a href="admin_view_property.jsp?prop_id='+jsonArray[obj].prop_id+'">'
        //                +' <img class="smallThumb" src="REAL/photo_01_' + jsonArray[obj].prop_id+'.jpg"'
        //                + 'alt="" /></a></td>'
        //                +' <td class="myPropertyAddress"><a href="admin_view_property.jsp?prop_id='+jsonArray[obj].prop_id+'">'
        //                +'<h4>'+jsonArray[obj].prop_title+'</h4></a></td>'
        //                +' <td class="myPropertyType">'+jsonArray[obj].prop_type+'</td>'
        //                +'  <td class="myPropertyStatus">'+jsonArray[obj].contract_type+'</td>'
        //                +' <td class="myPropertyDate">'+jsonArray[obj].post_date+'</td>'
        //                +' <td class="myPropertyActions"> <span> <a href="">'+jsonArray[obj].status+'</a></span> '
        //                +'<span><a href="admin_view_property.jsp?prop_id='+jsonArray[obj].prop_id+'">'
        //                +' <img class="icon" src="images/icon-view.png" alt="" />VIEW</a></span></td>'
        //                +'</tr>';
        //            }
        }
        completeHtml = completeHtml +' </table></div>'
        // console.log("html: " + completeHtml);
        $('#gridContainer').show().html(completeHtml);
    //$('#plotBody').show().html(plotHtml);
    }
}
function loadBuildingList(){
    var output =  dhtmlxAjax.getSync("CompletePropertyAjaxServlet");
    var data =  output.xmlDoc.responseText;
    var jsonArray = JSON.parse(data);
    var buildingHtml =  '<div class="col-lg-3 col-md-3 col-sm-6 wide plot" style="width:100%">'
    + '<h3>PLOT DETAILS</h3><div class="divider"></div>'
    +'<table class="myProperties">'
    
    +'<tr class="myPropertiesHeader">'
    +' <td class="myPropertyImg">Image</td>'
    +' <td class="myPropertyAddress">Address</td>'
    +'  <td class="myPropertyType">Type</td>'
    +'  <td class="myPropertyStatus">Status</td>'
    +' <td class="myPropertyDate">Date Created</td>'
    +'  <td class="myPropertyActions">Actions</td>'
    +' </tr>';
    if(jsonArray.length > 0){
        for(var obj in jsonArray){
            if(jsonArray[obj].type == 'building'){
               // alert(jsonArray[obj].prop_id);
                buildingHtml = buildingHtml +' <tr>'
                +' <td class="myPropertyImg"><a href="admin_view_property.jsp?prop_id='+jsonArray[obj].prop_id+'">'
                +' <img class="smallThumb" src="REAL/photo_01_' + jsonArray[obj].prop_id+'.jpg"'
                + ' alt="" /></a></td>'
                +' <td class="myPropertyAddress"><a href="admin_view_property.jsp?prop_id='+jsonArray[obj].prop_id+'">'
                +' <h4>'+jsonArray[obj].prop_title+'</h4></a></td>'
                +' <td class="myPropertyType">'+jsonArray[obj].prop_type+'</td>'
                +'  <td class="myPropertyStatus">'+jsonArray[obj].contract_type+'</td>'
                +' <td class="myPropertyDate">'+jsonArray[obj].post_date+'</td>'
                +' <td class="myPropertyActions"> <span> <a href="">'+jsonArray[obj].status+'</a></span> '
                +'<span><a href="admin_view_property.jsp?prop_id='+jsonArray[obj].prop_id+'">'
                +' <img class="icon" src="images/icon-view.png" alt="" />VIEW</a></span></td>'
                +'</tr>';
            }
        }
        buildingHtml = buildingHtml +' </table></div>'
        // console.log("html: " + completeHtml);
        $('#gridContainer').show().html(buildingHtml);
    //$('#plotBody').show().html(plotHtml);
    }
}
function loadPlotList(){
    var output =  dhtmlxAjax.getSync("CompletePropertyAjaxServlet");
    var data =  output.xmlDoc.responseText;
    var jsonArray = JSON.parse(data);
    var buildingHtml =  '<div class="col-lg-3 col-md-3 col-sm-6 wide plot" style="width:100%">'
    + '<h3>PLOT DETAILS</h3><div class="divider"></div>'
    +'<table class="myProperties">'
    
    +'<tr class="myPropertiesHeader">'
    +' <td class="myPropertyImg">Image</td>'
    +' <td class="myPropertyAddress">Address</td>'
    +'  <td class="myPropertyType">Type</td>'
    +'  <td class="myPropertyStatus">Status</td>'
    +' <td class="myPropertyDate">Date Created</td>'
    +'  <td class="myPropertyActions">Actions</td>'
    +' </tr>';
    if(jsonArray.length > 0){
        for(var obj in jsonArray){
            if(jsonArray[obj].type == 'plot'){
                buildingHtml = buildingHtml +' <tr>'
                +' <td class="myPropertyImg"><a href="admin_view_plot.jsp?prop_id='+jsonArray[obj].prop_id+'">'
                +' <img class="smallThumb" src="REAL/photo_01_' + jsonArray[obj].prop_id+'.jpg"'
                + ' alt="" /></a></td>'
                +' <td class="myPropertyAddress"><a href="admin_view_plot.jsp?prop_id='+jsonArray[obj].prop_id+'">'
                +' <h4>'+jsonArray[obj].prop_title+'</h4></a></td>'
                +' <td class="myPropertyType">'+jsonArray[obj].prop_type+'</td>'
                +'  <td class="myPropertyStatus">'+jsonArray[obj].contract_type+'</td>'
                +' <td class="myPropertyDate">'+jsonArray[obj].post_date+'</td>'
                +' <td class="myPropertyActions"> <span> <a href="">'+jsonArray[obj].status+'</a></span> '
                +'<span><a href="admin_view_plot.jsp?prop_id='+jsonArray[obj].prop_id+'">'
                +' <img class="icon" src="images/icon-view.png" alt="" />VIEW</a></span></td>'
                +'</tr>';
            }
        }
        buildingHtml = buildingHtml +' </table></div>'
        // console.log("html: " + completeHtml);
        $('#gridContainer').show().html(buildingHtml);
    //$('#plotBody').show().html(plotHtml);
    }
}

