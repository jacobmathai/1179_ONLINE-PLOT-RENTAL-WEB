/* 
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */


$('#defaultForm #searchBtn1').click(function(){
    var jsonArray = loadDefaultSettings();
    
    var searchHtml =   '<div class="container" id="child">'
    +'<h3>SEARCH RESULT</h3>'
    +'<div class="divider"></div>'
    +'<div class="row">';  
    console.log(jsonArray.length);
    if(jsonArray.length > 0){
        for(var obj in jsonArray){
            searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
            +'<div class="propertyItem">'
            +'<div class="propertyContent">'
            +'<a class="propertyType" href="#">'+jsonArray[obj].prop_type+'</a><!--FAMILY HOME-->'
            +'<a href="" class="propertyImgLink">'
            +' <img class="propertyImg" src="SEARCH/photo_01_'+jsonArray[obj].prop_id+'.jpg" alt="" /></a>'
            +'<h4><a href="">'+jsonArray[obj].prop_title+'</a></h4><!--587 Smith Avenue-->'
            +'<p>'+jsonArray[obj].address +'</p>'
            +'<div class="divider thin"></div>'
            +'<p class="forSale">'+jsonArray[obj].contract_type+'</p>'
            +'<p class="price">$'+jsonArray[obj].price+'</p>'
            +'</div>'
            +'<table border="1" class="propertyDetails">'
            +'<tr>'
            +' <td><img src="images/icon-area.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].area+'m</td>'
            +'<td><img src="images/icon-bed.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bedrooms+'</td>'
            +'<td><img src="images/icon-drop.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bathrooms+'</td>'
            +'</tr>'
            +'</table> '
            +'</div>'
            +'</div>';      
        }
  
    } else {
        searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
        +'<div class="propertyItem">'
        +'<div class="propertyContent">'
        +'<p>Sorry!     Your search result is not found.<p>'
        +'</div></div>';
    }
    searchHtml = searchHtml +'</div><!-- end row -->'
    +'</div><!-- end container -->';
    $('#saleSection').show().html(searchHtml);
});


$('#plotDefaultForm #plotDefaultBtn').click(function(){
    var jsonArray = loadDefaultPlotSettings();
    
    var searchHtml =   '<div class="container" id="child">'
    +'<h3>SEARCH RESULT</h3>'
    +'<div class="divider"></div>'
    +'<div class="row">';  
    console.log(jsonArray.length);
    if(jsonArray.length > 0){
        for(var obj in jsonArray){
            searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
            +'<div class="propertyItem">'
            +'<div class="propertyContent">'
            +'<a class="propertyType" href="#">'+jsonArray[obj].prop_type+'</a><!--FAMILY HOME-->'
            +'<a href="" class="propertyImgLink">'
            +' <img class="propertyImg" src="SEARCH/photo_01_'+jsonArray[obj].prop_id+'.jpg" alt="" /></a>'
            +'<h4><a href="">'+jsonArray[obj].prop_title+'</a></h4><!--587 Smith Avenue-->'
            +'<p>'+jsonArray[obj].address +'</p>'
            +'<div class="divider thin"></div>'
            +'<p class="forSale">'+jsonArray[obj].contract_type+'</p>'
            +'<p class="price">$'+jsonArray[obj].price+'</p>'
            +'</div>'
            +'<table border="1" class="propertyDetails">'
            +'<tr>'
            +' <td><img src="images/icon-area.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].area+'m</td>'
//            +'<td><img src="images/icon-bed.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bedrooms+'</td>'
//            +'<td><img src="images/icon-drop.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bathrooms+'</td>'
            +'</tr>'
            +'</table> '
            +'</div>'
            +'</div>';      
        }
  
    } else {
        searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
        +'<div class="propertyItem">'
        +'<div class="propertyContent">'
        +'<p>Sorry!     Your search result is not found.<p>'
        +'</div></div>';
    }
    searchHtml = searchHtml +'</div><!-- end row -->'
    +'</div><!-- end container -->';
    $('#plotSaleSection').show().html(searchHtml);
});


$('#saleForm #searchBtn2').click(function(){
    var propType =  $('#saleForm #propertyType2').val();
    var city =  $('#saleForm #location2').val();
    var downPrice =  $('#saleForm #priceMinDropDown').val();
    var maxPrice =  $('#saleForm #priceMaxDropdown').val();
    var beds =  $('#saleForm #beds2').val();
    var baths =  $('#saleForm #baths2').val();
    var area =  $('#saleForm #area2').val();
 
    //alert(downPrice + " " + maxPrice + " city: " + city + " pro: " + propType + " Bed: " + beds + " Baths: " + baths + " Area: " + area);alert(downPrice + " " + maxPrice + " city: " + city + " pro: " + propType + " Bed: " + beds + " Baths: " + baths + " Area: " + area);
    var param = '?propType='+propType+'&city='+city+'&downPrice='
    +downPrice+'&maxPrice='+maxPrice+'&beds='+beds+'&baths='+baths+'&area='+area;
    var output =  dhtmlxAjax.getSync("SaleSearchServlet"+param);
    var data =  output.xmlDoc.responseText;
   
    
    var searchHtml =   '<div class="container" id="child">'
    +'<h3>SEARCH RESULT</h3>'
    +'<div class="divider"></div>'
    +'<div class="row">';  
    var jsonArray = JSON.parse(data);
    console.log(jsonArray.length);
    if(jsonArray.length > 0){
        for(var obj in jsonArray){
            searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
            +'<div class="propertyItem">'
            +'<div class="propertyContent">'
            +'<a class="propertyType" href="#">'+jsonArray[obj].prop_type+'</a><!--FAMILY HOME-->'
            +'<a href="" class="propertyImgLink">'
            +' <img class="propertyImg" src="SEARCH/photo_01_'+jsonArray[obj].prop_id+'.jpg" alt="" /></a>'
            +'<h4><a href="">'+jsonArray[obj].prop_title+'</a></h4><!--587 Smith Avenue-->'
            +'<p>'+jsonArray[obj].address +'</p>'
            +'<div class="divider thin"></div>'
            +'<p class="forSale">'+jsonArray[obj].contract_type+'</p>'
            +'<p class="price">$'+jsonArray[obj].price+'</p>'
            +'</div>'
            +'<table border="1" class="propertyDetails">'
            +'<tr>'
            +' <td><img src="images/icon-area.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].area+'m</td>'
            +'<td><img src="images/icon-bed.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bedrooms+'</td>'
            +'<td><img src="images/icon-drop.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bathrooms+'</td>'
            +'</tr>'
            +'</table> '
            +'</div>'
            +'</div>';      
        }
  
    } else {
        searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
        +'<div class="propertyItem">'
        +'<div class="propertyContent">'
        +'<p>Sorry!     Your search result is not found.<p>'
        +'</div></div>';
    }
    searchHtml = searchHtml +'</div><!-- end row -->'
    +'</div><!-- end container -->';
    $('#saleSection').show().html(searchHtml);
});


$('#plotsaleForm #p_searchBtn2').click(function(){
    var propType =  $('#plotsaleForm #p_propertyType2').val();
    var city =  $('#plotsaleForm #p_location2').val();
    var downPrice =  $('#plotsaleForm #p_priceMinDropdown2').val();
    var maxPrice =  $('#plotsaleForm #p_priceMaxDropdown2').val();
    var area =  $('#plotsaleForm #p_area2').val();
 
    //alert(downPrice + " " + maxPrice + " city: " + city + " pro: " + propType + " Bed: " + beds + " Baths: " + baths + " Area: " + area);alert(downPrice + " " + maxPrice + " city: " + city + " pro: " + propType + " Bed: " + beds + " Baths: " + baths + " Area: " + area);
    var param = '?propType='+propType+'&city='+city+'&downPrice='
    +downPrice+'&maxPrice='+maxPrice+'&area='+area;
    var output =  dhtmlxAjax.getSync("PlotSaleServlet"+param);
    var data =  output.xmlDoc.responseText;
   
    
    var searchHtml =   '<div class="container" id="child">'
    +'<h3>SEARCH RESULT</h3>'
    +'<div class="divider"></div>'
    +'<div class="row">';  
    var jsonArray = JSON.parse(data);
    console.log(jsonArray.length);
    if(jsonArray.length > 0){
        for(var obj in jsonArray){
            searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
            +'<div class="propertyItem">'
            +'<div class="propertyContent">'
            +'<a class="propertyType" href="#">'+jsonArray[obj].prop_type+'</a><!--FAMILY HOME-->'
            +'<a href="" class="propertyImgLink">'
            +' <img class="propertyImg" src="SEARCH/photo_01_'+jsonArray[obj].prop_id+'.jpg" alt="" /></a>'
            +'<h4><a href="">'+jsonArray[obj].prop_title+'</a></h4><!--587 Smith Avenue-->'
            +'<p>'+jsonArray[obj].address +'</p>'
            +'<div class="divider thin"></div>'
            +'<p class="forSale">'+jsonArray[obj].contract_type+'</p>'
            +'<p class="price">$'+jsonArray[obj].price+'</p>'
            +'</div>'
            +'<table border="1" class="propertyDetails">'
            +'<tr>'
            +' <td><img src="images/icon-area.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].area+'m</td>'
//            +'<td><img src="images/icon-bed.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bedrooms+'</td>'
//            +'<td><img src="images/icon-drop.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bathrooms+'</td>'
            +'</tr>'
            +'</table> '
            +'</div>'
            +'</div>';      
        }
  
    } else {
        searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
        +'<div class="propertyItem">'
        +'<div class="propertyContent">'
        +'<p>Sorry!     Your search result is not found.<p>'
        +'</div></div>';
    }
    searchHtml = searchHtml +'</div><!-- end row -->'
    +'</div><!-- end container -->';
    $('#plotSaleSection').show().html(searchHtml);
});


$('#rentForm #searchBtn3').click(function(){
    var propType =  $('#rentForm #propertyType3').val();
    var city =  $('#rentForm #location3').val();
    var downPrice =  $('#rentForm #priceMinDropDown3').val();
    var maxPrice =  $('#rentForm #priceMaxDropdown3').val();
    var beds =  $('#rentForm #beds3').val();
    var baths =  $('#rentForm #baths3').val();
    var area =  $('#rentForm #area3').val();
 
 
    var param = '?propType='+propType+'&city='+city+'&downPrice='
    +downPrice+'&maxPrice='+maxPrice+'&beds='+beds+'&baths='+baths+'&area='+area;
    var output =  dhtmlxAjax.getSync("RentSearchServlet"+param);
    var data =  output.xmlDoc.responseText;
   
    
    var searchHtml =   '<div class="container" id="child">'
    +'<h3>SEARCH RESULT</h3>'
    +'<div class="divider"></div>'
    +'<div class="row">';  
    var jsonArray = JSON.parse(data);
    console.log(jsonArray.length);
    if(jsonArray.length > 0){
        for(var obj in jsonArray){
            searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
            +'<div class="propertyItem">'
            +'<div class="propertyContent">'
            +'<a class="propertyType" href="#">'+jsonArray[obj].prop_type+'</a><!--FAMILY HOME-->'
            +'<a href="" class="propertyImgLink">'
            +' <img class="propertyImg" src="images/home1.jpg" alt="" /></a>'
            +'<h4><a href="">'+jsonArray[obj].prop_title+'</a></h4><!--587 Smith Avenue-->'
            +'<p>'+jsonArray[obj].address +'</p>'
            +'<div class="divider thin"></div>'
            +'<p class="forSale">'+jsonArray[obj].contract_type+'</p>'
            +'<p class="price">$'+jsonArray[obj].price+'</p>'
            +'</div>'
            +'<table border="1" class="propertyDetails">'
            +'<tr>'
            +' <td><img src="images/icon-area.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].area+'m</td>'
            +'<td><img src="images/icon-bed.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bedrooms+'</td>'
            +'<td><img src="images/icon-drop.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bathrooms+'</td>'
            +'</tr>'
            +'</table> '
            +'</div>'
            +'</div>';      
        }
  
    } else {
        searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
        +'<div class="propertyItem">'
        +'<div class="propertyContent">'
        +'<p>Sorry!     Your search result is not found.<p>'
        +'</div></div>';
    }
    searchHtml = searchHtml +'</div><!-- end row -->'
    +'</div><!-- end container -->';
    $('#saleSection').show().html(searchHtml);
    
});


$('#plotRentForm #rentPlotBtn').click(function(){
    var propType =  $('#plotRentForm #p_propertyType3').val();
    var city =  $('#plotRentForm #p_location3').val();
    var downPrice =  $('#plotRentForm #p_priceMinDropDown3').val();
    var maxPrice =  $('#plotRentForm #p_priceMaxDropdown3').val();
    var area =  $('#plotRentForm #p_area3').val();
 
 
    var param = '?propType='+propType+'&city='+city+'&downPrice='
    +downPrice+'&maxPrice='+maxPrice+'&area='+area;
    var output =  dhtmlxAjax.getSync("PlotRentSearchServlet"+param);
    var data =  output.xmlDoc.responseText;
   
    
    var searchHtml =   '<div class="container" id="child">'
    +'<h3>SEARCH RESULT</h3>'
    +'<div class="divider"></div>'
    +'<div class="row">';  
    var jsonArray = JSON.parse(data);
    console.log(jsonArray.length);
    if(jsonArray.length > 0){
        for(var obj in jsonArray){
            searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
            +'<div class="propertyItem">'
            +'<div class="propertyContent">'
            +'<a class="propertyType" href="#">'+jsonArray[obj].prop_type+'</a><!--FAMILY HOME-->'
            +'<a href="" class="propertyImgLink">'
            +' <img class="propertyImg" src="images/home1.jpg" alt="" /></a>'
            +'<h4><a href="">'+jsonArray[obj].prop_title+'</a></h4><!--587 Smith Avenue-->'
            +'<p>'+jsonArray[obj].address +'</p>'
            +'<div class="divider thin"></div>'
            +'<p class="forSale">'+jsonArray[obj].contract_type+'</p>'
            +'<p class="price">$'+jsonArray[obj].price+'</p>'
            +'</div>'
            +'<table border="1" class="propertyDetails">'
            +'<tr>'
            +' <td><img src="images/icon-area.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].area+'m</td>'
//            +'<td><img src="images/icon-bed.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bedrooms+'</td>'
//            +'<td><img src="images/icon-drop.png" alt="" style="margin-right:7px;" />'+jsonArray[obj].bathrooms+'</td>'
            +'</tr>'
            +'</table> '
            +'</div>'
            +'</div>';      
        }
  
    } else {
        searchHtml = searchHtml  +'<div class="col-lg-3 col-md-3 col-sm-6">'
        +'<div class="propertyItem">'
        +'<div class="propertyContent">'
        +'<p>Sorry!     Your search result is not found.<p>'
        +'</div></div>';
    }
    searchHtml = searchHtml +'</div><!-- end row -->'
    +'</div><!-- end container -->';
    $('#plotSaleSection').show().html(searchHtml);
    
});


function loadDefaultSettings(){
    var propType =  $('#defaultForm #propertyType').val();
    var city =  $('#defaultForm #location').val();
    var priceMin =  $('#defaultForm #price-min').val();
    var pricemax =  $('#defaultForm #price-max').val();
    var maxPrice = '';
    var downPrice = '';
    for(i = 0; i < pricemax.length; i++){
        if(pricemax.charAt(i) != ","){
            maxPrice = maxPrice + pricemax.charAt(i);
        }
    }
    
    for(i = 0; i < priceMin.length; i++){
        if(priceMin.charAt(i) != ","){
            downPrice = downPrice + priceMin.charAt(i);
        }
    }
     
    var beds =  $('#defaultForm #beds').val();
    var baths =  $('#defaultForm #baths').val();
    var area =  $('#defaultForm #area').val();
    //alert(downPrice + " " + maxPrice + " city: " + city + " pro: " + propType + " Bed: " + beds + " Baths: " + baths + " Area: " + area);
 
    var param = '?propType='+propType+'&city='+city+'&downPrice='
    +downPrice+'&maxPrice='+maxPrice+'&beds='+beds+'&baths='+baths+'&area='+area;
    var output =  dhtmlxAjax.getSync("DefualtSearchServlet"+param);
    var data =  output.xmlDoc.responseText;
    var jsonArray = JSON.parse(data);
    return jsonArray;
}
function loadDefaultPlotSettings(){
    var propType =  $('#plotDefaultForm #p_propertyType').val();
    var city =  $('#plotDefaultForm #p_location').val();
    var priceMin =  $('#plotDefaultForm #p_priceMinDropdown1').val();
    var pricemax =  $('#plotDefaultForm #p_priceMaxDropdown1').val();
    var maxPrice = '';
    var downPrice = '';
    for(i = 0; i < pricemax.length; i++){
        if(pricemax.charAt(i) != ","){
            maxPrice = maxPrice + pricemax.charAt(i);
        }
    }
    
    for(i = 0; i < priceMin.length; i++){
        if(priceMin.charAt(i) != ","){
            downPrice = downPrice + priceMin.charAt(i);
        }
    }
     
 
    var area =  $('#plotDefaultForm #p_area').val();
    //alert(downPrice + " " + maxPrice + " city: " + city + " pro: " + propType + " Bed: " + beds + " Baths: " + baths + " Area: " + area);
 
    var param = '?propType='+propType+'&city='+city+'&downPrice='
    +downPrice+'&maxPrice='+maxPrice+'&area='+area;
    var output =  dhtmlxAjax.getSync("DefaultPlotServlet"+param);
    var data =  output.xmlDoc.responseText;
    var jsonArray = JSON.parse(data);
    return jsonArray;
}